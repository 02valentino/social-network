{% extends 'base.html' %}

{% block content %}
  <h2>{{ profile_user.username }}</h2>

    <p><strong>Followers:</strong> {{ followers_count }}</p>
    <p><strong>Following:</strong> {{ following_count }}</p>

  {% if profile_user.bio %}
    <p><strong>Bio:</strong> {{ profile_user.bio }}</p>
  {% endif %}

  {% if user.is_authenticated and user == profile_user %}
    <p><strong>Email:</strong> {{ profile_user.email }}</p>
    <p><strong>Joined:</strong> {{ profile_user.date_joined }}</p>
    <p><a href="{% url 'edit-profile' %}">Edit Profile</a></p>
  {% endif %}

  {% if user.is_authenticated and user != profile_user %}
    <form method="post" action="{% url 'follow-user' profile_user.username %}" style="display: inline;">
      {% csrf_token %}
      {% if user_follows %}
        <button formaction="{% url 'unfollow-user' profile_user.username %}" type="submit">Unfollow</button>
      {% else %}
        <button type="submit">Follow</button>
      {% endif %}
    </form>
  {% endif %}

  {% if user.is_authenticated %}
    <h3>Posts by {{ profile_user.username }}</h3>
    {% if posts %}
      <ul>
        {% for post in posts %}
          <li>{{ post.content }} <em>â€” {{ post.posted_at|date:"M d, Y H:i" }}</em></li>
          {% include "network/partials/like_button.html" with post=post %}
        {% endfor %}
      </ul>
    {% else %}
      <p>No posts yet.</p>
    {% endif %}
  {% else %}
    <p><em>You must be logged in to view this user's posts.</em></p>
  {% endif %}
{% endblock %}
